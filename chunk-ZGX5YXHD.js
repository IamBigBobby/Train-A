import{A as xt,Aa as ht,B as me,Bb as Pt,D as At,F as ge,Ga as Ce,H as D,Ia as Te,J as M,Ja as Ie,K as S,Ka as F,Kb as Be,M as ye,Ma as Ee,Nb as Le,Pb as Ue,Q as we,Qb as We,R as De,S as be,T as Oe,U as g,V as Mt,Vb as Ve,Xa as xe,Ya as Ae,Za as Me,_a as Se,bb as Fe,da as St,e as pe,ea as dt,hb as Pe,jb as Re,l as ut,lb as _e,nb as He,q as fe,qb as je,rb as ke,sb as Ze,y as ve,ya as lt,yb as Ne,zb as Ft}from"./chunk-V43RW7AC.js";import{Aa as nt,Ab as It,Ba as G,Bb as Et,Bc as le,C as N,Da as u,E as B,Fb as ie,Ib as ne,Ja as bt,Jb as st,Lb as oe,Mb as re,Na as h,O as yt,Ob as se,Pb as ce,Q as v,Qa as ot,Qb as ct,Rb as at,Sa as Yt,Sc as he,T as Gt,Ta as C,Tb as ae,Va as Xt,Vb as ue,Xc as w,ab as z,ac as I,bb as Ot,bc as K,ca as zt,d as x,da as Qt,dc as de,eb as qt,fa as O,g as A,ga as wt,h as $t,ia as Kt,ib as Ct,ja as Dt,ka as tt,kb as T,l as V,lb as rt,mb as Q,oa as a,qb as Jt,ra as et,rb as te,sb as ee,t as l,tb as Tt,ua as r,uc as Y,wa as $,wc as E,ya as it,z as gt}from"./chunk-FW5WJFJQ.js";import{a as Wt,b as Vt}from"./chunk-T527G4PA.js";var si=["viewContainer"],Rt=class{},ci=(()=>{let t=class t{constructor(){this.refresh$=new A,this.pseudoInvalid=T(null),this.internal=T(r(Ue,{self:!0,optional:!0})),this.control=r(ut,{self:!0}),this.destroyRef=r(ot),this.cdr=r(Y),this.transformer=r(Rt,{optional:!0}),this.value=E(()=>this.internal()),this.readOnly=T(!1),this.touched=T(!1),this.status=T(void 0),this.disabled=E(()=>this.status()==="DISABLED"),this.interactive=E(()=>!this.disabled()&&!this.readOnly()),this.invalid=E(()=>this.pseudoInvalid()!==null?!!this.pseudoInvalid()&&this.interactive():this.interactive()&&this.touched()&&this.status()==="INVALID"),this.mode=E(()=>this.readOnly()?"readonly":this.invalid()?"invalid":"valid"),this.onTouched=St,this.onChange=St,this.control.valueAccessor=this,this.refresh$.pipe(yt(0),O(null),l(()=>this.control.control),B(ge),v(),wt(e=>N(e.valueChanges,e.statusChanges)),w(this.destroyRef)).subscribe(()=>{this.update()})}set readOnlySetter(e){this.readOnly.set(e)}set invalidSetter(e){this.pseudoInvalid.set(e)}registerOnChange(e){this.refresh$.next(),this.onChange=n=>{n!==this.internal()&&(e(this.toControlValue(n)),this.internal.set(n),this.update())}}registerOnTouched(e){this.onTouched=()=>{e(),this.update()}}setDisabledState(){this.update()}writeValue(e){let n=this.control instanceof fe?this.control.model:e;this.internal.set(this.fromControlValue(n)),this.update()}fromControlValue(e){return this.transformer?this.transformer.fromControlValue(e):e}toControlValue(e){return this.transformer?this.transformer.toControlValue(e):e}update(){this.status.set(this.control.control?.status),this.touched.set(!!this.control.control?.touched),this.cdr.markForCheck()}};t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=u({type:t,inputs:{readOnlySetter:[0,"readOnly","readOnlySetter"],invalidSetter:[0,"invalid","invalidSetter"]}});let i=t;return V([M],i.prototype,"fromControlValue",null),V([M],i.prototype,"toControlValue",null),i})();function Ui(i){return D(ci,i)}var $e=(()=>{let t=class t{constructor(){this.injector=r(nt),this.nothing=r(pt).attach(this)}addComponentChild(e){let n=e.createInjector(this.injector),o=this.vcr.createComponent(e.component,{injector:n});return o.changeDetectorRef.detectChanges(),o}addTemplateChild(e,n){return this.vcr.createEmbeddedView(e,n)}};t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=u({type:t,viewQuery:function(n,o){if(n&1&&ce(si,5,Ct),n&2){let s;ct(s=at())&&(o.vcr=s.first)}}});let i=t;return i})(),pt=(()=>{let t=class t{attach(e){this.host=e}add(e){return this.safeHost.addComponentChild(e)}remove({hostView:e}){e.destroyed||e.destroy()}addTemplate(e,n){return this.safeHost.addTemplateChild(e,n)}removeTemplate(e){e.destroyed||e.destroy()}get safeHost(){if(!this.host)throw new _t;return this.host}};t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=a({token:t,factory:t.\u0275fac});let i=t;return i})();function Ge(i){return D(pt,i)}var _t=class extends Error{constructor(){super("")}};var b=class{supports(t){return t.includes(this.modifier)}unwrap(t){return t.split(".").filter(d=>!this.modifier.includes(d)).join(".")}},ai=new et("[GLOBAL_HANDLER]: Global event target handler",{factory:()=>{let i=r(le);return t=>t==="body"?i.body:i.defaultView[t]||i.createElement("div")}}),ui=(()=>{let t=class t extends b{constructor(){super(...arguments),this.handler=r(ai),this.modifier=">"}addEventListener(e,n,o){return this.manager.addEventListener(this.handler(n.split(">")[0]),n.split(">")[1],o)}};t.\u0275fac=(()=>{let e;return function(o){return(e||(e=h(t)))(o||t)}})(),t.\u0275prov=a({token:t,factory:t.\u0275fac});let i=t;return i})(),di=(()=>{let t=class t extends b{constructor(){super(...arguments),this.modifier="capture.once.passive"}supports(e){return e.includes(".")&&!this.unwrap(e).includes(".")}addEventListener(e,n,o){return e.addEventListener(this.unwrap(n),o,{once:n.includes(".once"),passive:n.includes(".passive"),capture:n.includes(".capture")}),()=>e.removeEventListener(this.unwrap(n),o,n.includes(".capture"))}};t.\u0275fac=(()=>{let e;return function(o){return(e||(e=h(t)))(o||t)}})(),t.\u0275prov=a({token:t,factory:t.\u0275fac});let i=t;return i})(),li=(()=>{let t=class t extends b{constructor(){super(...arguments),this.modifier=".prevent"}addEventListener(e,n,o){return this.manager.addEventListener(e,this.unwrap(n),s=>{s.preventDefault(),o(s)})}};t.\u0275fac=(()=>{let e;return function(o){return(e||(e=h(t)))(o||t)}})(),t.\u0275prov=a({token:t,factory:t.\u0275fac});let i=t;return i})(),hi=(()=>{let t=class t extends b{constructor(){super(...arguments),this.modifier="resize"}supports(e){return e==="resize"}addEventListener(e,n,o){if(typeof ResizeObserver>"u"||!(e instanceof Element))return()=>{};let s=new ResizeObserver(c=>this.manager.getZone().run(()=>o(c)));return s.observe(e),()=>s.disconnect()}};t.\u0275fac=(()=>{let e;return function(o){return(e||(e=h(t)))(o||t)}})(),t.\u0275prov=a({token:t,factory:t.\u0275fac});let i=t;return i})(),pi=(()=>{let t=class t extends b{constructor(){super(...arguments),this.modifier=".self"}addEventListener(e,n,o){return this.manager.addEventListener(e,this.unwrap(n),s=>{s.target===s.currentTarget&&o(s)})}};t.\u0275fac=(()=>{let e;return function(o){return(e||(e=h(t)))(o||t)}})(),t.\u0275prov=a({token:t,factory:t.\u0275fac});let i=t;return i})(),Ht=(()=>{let t=class t extends b{constructor(){super(...arguments),this.modifier=".silent"}addEventListener(e,n,o){return t.ngZone=this.manager.getZone(),t.ngZone.runOutsideAngular(()=>this.manager.addEventListener(e,this.unwrap(n),o))}};t.\u0275fac=(()=>{let e;return function(o){return(e||(e=h(t)))(o||t)}})(),t.\u0275prov=a({token:t,factory:t.\u0275fac});let i=t;return i})(),fi=(()=>{let t=class t extends b{constructor(){super(...arguments),this.modifier=".stop"}addEventListener(e,n,o){return this.manager.addEventListener(e,this.unwrap(n),s=>{s.stopPropagation(),o(s)})}};t.\u0275fac=(()=>{let e;return function(o){return(e||(e=h(t)))(o||t)}})(),t.\u0275prov=a({token:t,factory:t.\u0275fac});let i=t;return i})(),vi=[Ht,ui,di,li,hi,pi,fi],Qi=vi.map(i=>({provide:he,multi:!0,useClass:i}));function ze(i){return(t,d,e)=>{let{value:n}=e;e.value=function(...o){i.apply(this,o)&&(Ht.ngZone?Ht.ngZone.run(()=>n.apply(this,o)):n.apply(this,o))}}}var R=(()=>{let t=class t{constructor(){this.control=r(ut,{optional:!0,self:!0}),this.active$=r(Be),this.zone=r(C),this.el=g(),this.tuiActiveZoneParent=null,this.subActiveZones=[],this.directParentActiveZone=r(t,{skipSelf:!0,optional:!0}),this.tuiActiveZoneChange=this.active$.pipe(l(e=>!!e&&this.contains(e)),O(!1),v(),Qt(1),Dt(e=>{!e&&typeof this.control?.valueAccessor.onTouched=="function"&&this.control.valueAccessor.onTouched()}),F(this.zone)),this.directParentActiveZone?.addSubActiveZone(this)}set tuiActiveZoneParentSetter(e){this.setZone(e)}ngOnDestroy(){this.directParentActiveZone?.removeSubActiveZone(this),this.tuiActiveZoneParent?.removeSubActiveZone(this)}contains(e){return this.el.contains(e)||this.subActiveZones.some((n,o,s)=>s.indexOf(n)===o&&n.contains(e))}setZone(e){this.tuiActiveZoneParent?.removeSubActiveZone(this),e?.addSubActiveZone(this),this.tuiActiveZoneParent=e}addSubActiveZone(e){this.subActiveZones=[...this.subActiveZones,e]}removeSubActiveZone(e){this.subActiveZones=ve(this.subActiveZones,this.subActiveZones.indexOf(e))}};t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=u({type:t,selectors:[["","tuiActiveZone","",5,"ng-container"],["","tuiActiveZoneChange","",5,"ng-container"],["","tuiActiveZoneParent","",5,"ng-container"]],hostBindings:function(n,o){n&1&&st("mousedown.silent",function(){return 0},!1,z)},inputs:{tuiActiveZoneParentSetter:[0,"tuiActiveZoneParent","tuiActiveZoneParentSetter"]},outputs:{tuiActiveZoneChange:"tuiActiveZoneChange"},exportAs:["tuiActiveZone"],standalone:!0});let i=t;return V([M],i.prototype,"setZone",null),i})();var ft=class{},_=class extends ft{},H=class extends ft{};function Qe(i,t,d){return{provide:i,deps:[[new it,new $,i],d],useFactory:jt(t)}}function jt(i){return(t,d)=>t?.find?.(e=>e!==d&&e.type===i)||d}function Ke(i,t){return Qe(_,i,t)}function Ye(i,t){return Qe(H,i,t)}function Xe(i){return D(H,i,!0)}var vt=class{};function qe(i){return D(vt,i,!0)}var X=class extends x{};function Je(i){return D(X,i,!0)}var ti=(()=>{let t=class t{constructor(){this.destroyRef=r(ot),this.drivers=r(X),this.vehicles=r(vt)}ngOnInit(){let e=this.vehicles.find(({type:n})=>n===this.type);N(...this.drivers.filter(({type:n})=>n===this.type)).pipe(v(),w(this.destroyRef)).subscribe(n=>{e?.toggle(n)})}};t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=u({type:t});let i=t;return i})();var Tn=(()=>{let t=class t extends x{constructor(){super(e=>this.stream$.subscribe(e)),this.media=r(Se),this.sorted=Object.values(this.media).sort((e,n)=>e-n),this.invert=Object.keys(this.media).reduce((e,n)=>Vt(Wt({},e),{[this.media[n]]:n}),{}),this.stream$=r(We).pipe(l(({width:e})=>this.sorted.find(n=>n>e)),l(e=>this.invert[e||this.sorted[this.sorted.length-1]]),v(),F(r(C)),zt({bufferSize:1,refCount:!0}))}};t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=a({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();var kt=(()=>{let t=class t extends x{constructor(){let e=r(ht),n=r(C);super(o=>e.pipe(O(null),l(()=>this.accessor.getPosition(this.el.getBoundingClientRect())),Ie(n),Gt(()=>this.accessor.getPosition(dt))).subscribe(o)),this.el=g(),this.accessor=r(_)}};t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=a({token:t,factory:t.\u0275fac});let i=t;return i})(),ei=(()=>{let t=class t{constructor(){this.isWebkit=r(Le),this.win=r(lt)}correct(e){return this.isWebkit?[e[0]+(this.win.visualViewport?.offsetTop??0),e[1]+(this.win.visualViewport?.offsetLeft??0)]:e}};t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=a({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();function Zt(i,t,d,e){var n=arguments.length,o=n<3?t:e===null?e=Object.getOwnPropertyDescriptor(t,d):e,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,t,d,e);else for(var c=i.length-1;c>=0;c--)(s=i[c])&&(o=(n<3?s(o):n>3?s(t,d,o):s(t,d))||o);return n>3&&o&&Object.defineProperty(t,d,o),o}var ii=(()=>{let t=class t extends x{constructor(){super(e=>this.obscured$.subscribe(e)),this.el=g(),this.obscured$=r(ht).pipe(tt(100),l(()=>Oe(this.el)),O(null),v(),F(r(C)))}};t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=a({token:t,factory:t.\u0275fac});let i=t;return i})(),mt=(()=>{let t=class t{constructor(){this.activeZone=r(R,{optional:!0}),this.enabled$=new A,this.obscured$=r(ii,{self:!0}).pipe(l(e=>!!e?.every(n=>!this.activeZone?.contains(n)))),this.tuiObscured=this.enabled$.pipe(Ce(()=>this.obscured$))}set tuiObscuredEnabled(e){this.enabled$.next(e)}};t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=u({type:t,selectors:[["","tuiObscured",""]],inputs:{tuiObscuredEnabled:"tuiObscuredEnabled"},outputs:{tuiObscured:"tuiObscured"},standalone:!0,features:[I([ii])]});let i=t;return i})();var wi=i=>({$implicit:i});function Di(i,t){if(i&1&&(It(0,"div",2),ae(1),Et()),i&2){let d=t.polymorpheusOutlet;Ot(),ue(" ",d," ")}}var bi=["tuiDropdownHost"],Oi=["*"],Nt=(()=>{let t=class t extends A{constructor(){super(...arguments),this.type="dropdown"}};t.\u0275fac=(()=>{let e;return function(o){return(e||(e=h(t)))(o||t)}})(),t.\u0275prov=a({token:t,factory:t.\u0275fac});let i=t;return i})(),Ci=(()=>{let t=class t extends ti{constructor(){super(...arguments),this.type="dropdown"}};t.\u0275fac=(()=>{let e;return function(o){return(e||(e=h(t)))(o||t)}})(),t.\u0275dir=u({type:t,selectors:[["","tuiDropdownDriver",""]],standalone:!0,features:[rt]});let i=t;return i})(),Ti=me(()=>xi),Ii=new et(""),ni=(()=>{let t=class t extends pt{};t.\u0275fac=(()=>{let e;return function(o){return(e||(e=h(t)))(o||t)}})(),t.\u0275prov=a({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})(),oi={align:"left",direction:null,limitWidth:"auto",maxHeight:400,minHeight:80,offset:4,appearance:""},L=xt(oi),Fo=i=>({provide:L,deps:[[new $,Ei],[new $,new it,L]],useFactory:_e(i,oi)}),Ei=(()=>{let t=class t{constructor(){this.options=r(L,{skipSelf:!0}),this.align=this.options.align,this.appearance=this.options.appearance,this.direction=this.options.direction,this.limitWidth=this.options.limitWidth,this.minHeight=this.options.minHeight,this.maxHeight=this.options.maxHeight,this.offset=this.options.offset}};t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=u({type:t,selectors:[["","tuiDropdownAlign",""],["","tuiDropdownAppearance",""],["","tuiDropdownDirection",""],["","tuiDropdownLimitWidth",""],["","tuiDropdownMinHeight",""],["","tuiDropdownMaxHeight",""],["","tuiDropdownOffset",""]],inputs:{align:[0,"tuiDropdownAlign","align"],appearance:[0,"tuiDropdownAppearance","appearance"],direction:[0,"tuiDropdownDirection","direction"],limitWidth:[0,"tuiDropdownLimitWidth","limitWidth"],minHeight:[0,"tuiDropdownMinHeight","minHeight"],maxHeight:[0,"tuiDropdownMaxHeight","maxHeight"],offset:[0,"tuiDropdownOffset","offset"]},standalone:!0,features:[I([D(L,t)])]});let i=t;return i})(),ri=(()=>{let t=class t extends _{constructor(){super(...arguments),this.options=r(L),this.viewport=r(Fe),this.type="dropdown",this.accessor=jt("dropdown")(r(H),r(q,{optional:!0}))}getPosition({width:e,height:n}){!e&&!n&&(this.previous=void 0);let o=this.accessor?.getClientRect()??dt,s=this.viewport.getClientRect(),{minHeight:c,align:y,direction:U,offset:p,limitWidth:J}=this.options,m={top:s.top-p,bottom:s.bottom+p,right:s.right-p,left:s.left+p},f=this.previous||U||"bottom",j={top:o.top-2*p-m.top,bottom:m.bottom-o.bottom-2*p},k=J==="fixed"?o.width:e,W=Math.max(o.right-k,p),Lt=o.left+e<m.right?o.left:W,Z={top:o.top-p-n,bottom:o.bottom+p,right:Math.max(m.left,W),center:o.left+o.width/2+e/2<m.right?o.left+o.width/2-e/2:W,left:Math.max(m.left,Lt)},Ut=j.top>j.bottom?"top":"bottom";return j[f]>c&&U||j[f]>n?[Z[f],Z[y]]:(this.previous=Ut,[Z[Ut],Z[y]])}};t.\u0275fac=(()=>{let e;return function(o){return(e||(e=h(t)))(o||t)}})(),t.\u0275dir=u({type:t,selectors:[["","tuiDropdownPosition",""]],standalone:!0,features:[rt]});let i=t;return i})(),q=(()=>{let t=class t{constructor(){this.refresh$=new A,this.service=r(ni),this.cdr=r(Y),this.sub=this.refresh$.pipe(tt(0),w()).subscribe(()=>{this.ref()?.changeDetectorRef.detectChanges(),this.ref()?.changeDetectorRef.markForCheck()}),this.el=g(),this.type="dropdown",this.component=new je(r(Ti),r(nt)),this.ref=T(null)}set tuiDropdown(e){this.content=e instanceof qt?new ke(e,this.cdr):e}get position(){return Pe(this.el)?"fixed":"absolute"}ngAfterViewChecked(){this.refresh$.next()}ngOnChanges(){this.content||this.toggle(!1)}ngOnDestroy(){this.toggle(!1)}getClientRect(){return this.el.getBoundingClientRect()}toggle(e){let n=this.ref();e&&this.content&&!n?this.ref.set(this.service.add(this.component)):!e&&n&&(this.ref.set(null),this.service.remove(n))}};t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=u({type:t,selectors:[["","tuiDropdown","",5,"ng-container",5,"ng-template"]],inputs:{tuiDropdown:"tuiDropdown"},exportAs:["tuiDropdown"],standalone:!0,features:[I([Xe(t),qe(t)]),Q([Ci,ri]),bt]});let i=t;return Zt([M],i.prototype,"position",null),i})(),xi=(()=>{let t=class t{constructor(){this.el=g(),this.accessor=r(H),this.win=r(lt),this.vvs=r(ei),this.animation=He(r(Ee)),this.options=r(L),this.directive=r(q),this.context=r(Ii,{optional:!0}),this.theme=this.directive.el.closest("[tuiTheme]")?.getAttribute("tuiTheme"),this.sub=r(kt).pipe(Kt(()=>this.directive.el.isConnected),l(e=>this.directive.position==="fixed"?this.vvs.correct(e):e),l(([e,n])=>this.getStyles(e,n)),w()).subscribe({next:e=>Object.assign(this.el.style,e),complete:()=>this.close()}),this.close=()=>this.directive.toggle(!1)}getStyles(e,n){let{right:o}=this.el.getBoundingClientRect(),{maxHeight:s,minHeight:c,offset:y,limitWidth:U}=this.options,{innerHeight:p}=this.win,J=this.el.offsetParent?.getBoundingClientRect(),{position:m}=this.directive,f=this.accessor.getClientRect(),j=m==="fixed"?0:-(J?.left||0),k=m==="fixed"?0:-(J?.top||0);e+=k,n+=j;let W=o<=f.left||n>=f.right,Z=n<f.right&&o>f.left&&e<k+2*y?f.top-2*y:k+p-e-y;return{position:m,top:S(Math.round(Math.max(e,k+y))),left:S(Math.round(n)),maxHeight:W?S(s):S(Math.round(ye(Z,c,s))),width:U==="fixed"?S(Math.round(f.width)):"",minWidth:U==="min"?S(Math.round(f.width)):""}}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=G({type:t,selectors:[["tui-dropdown"]],hostVars:3,hostBindings:function(n,o){n&2&&(ne("@tuiDropdownAnimation",o.animation),te("data-appearance",o.options.appearance)("tuiTheme",o.theme))},standalone:!0,features:[I([kt,Ke("dropdown",ri),Ye("dropdown",q)]),Q([R]),K],decls:2,vars:4,consts:[[1,"t-scroll"],["class","t-primitive",4,"polymorpheusOutlet","polymorpheusOutletContext"],[1,"t-primitive"]],template:function(n,o){n&1&&(It(0,"tui-scrollbar",0),Jt(1,Di,2,1,"div",1),Et()),n&2&&(Ot(),ee("polymorpheusOutlet",o.directive.content)("polymorpheusOutletContext",de(2,wi,o.close)))},dependencies:[Ze,Ve],styles:["[_nghost-%COMP%]{position:absolute;display:flex;box-shadow:var(--tui-shadow-medium);background:var(--tui-background-elevation-2);border-radius:var(--tui-radius-m);overflow:hidden;border:1px solid var(--tui-border-normal);box-sizing:border-box;max-width:calc(100% - 8px);isolation:isolate;pointer-events:auto}.ng-animating[_nghost-%COMP%]{pointer-events:none}[_nghost-%COMP%]:not([style*=top]){visibility:hidden}.t-scroll[_ngcontent-%COMP%]{flex-grow:1;max-width:100%;overscroll-behavior:none}.t-primitive[_ngcontent-%COMP%]{padding:1rem}"],data:{animation:[pe]}});let i=t;return i})();var Ai={showDelay:200,hideDelay:500},Po=xt(Ai);function Mi(i){return"key"in i&&i.key.toLowerCase()==="escape"&&this.tuiDropdownEnabled&&!!this.tuiDropdownOpen&&!this.dropdown()?.nextElementSibling}var Bt=(()=>{let t=class t{constructor(){this.directive=r(q),this.el=g(),this.obscured=r(mt),this.dropdown=E(()=>this.directive.ref()?.location.nativeElement),this.sub=N(this.obscured.tuiObscured.pipe(B(Boolean)),r(R).tuiActiveZoneChange.pipe(B(e=>!e)),gt(this.el,"focusin").pipe(l(be),B(e=>!this.host.contains(e)||!this.directive.ref()))).pipe(Te(r(Y)),w()).subscribe(()=>this.toggle(!1)),this.tuiDropdownEnabled=!0,this.tuiDropdownOpen=!1,this.tuiDropdownOpenChange=new Yt,this.driver=r(Nt)}ngOnChanges(){this.drive()}toggle(e){this.focused&&!e&&this.host.focus({preventScroll:!0}),this.update(e)}onClick(e){!this.editable&&this.host.contains(e)&&this.update(!this.tuiDropdownOpen)}onArrow(e,n){!we(e.target)||!this.host.contains(e.target)||!this.tuiDropdownEnabled||(e.preventDefault(),this.focusDropdown(n))}onEsc(e){e.preventDefault(),this.toggle(!1)}onKeydown({key:e,target:n,defaultPrevented:o}){o||!Re(e)||!this.editable||!this.focused||!De(n)||Mt(n)&&n!==this.host||(this.update(!0),this.host.focus({preventScroll:!0}))}get host(){let e=this.dropdownHost?.nativeElement||this.el,n=Ne(e)?e:Ft({initial:e,root:this.el});return this.dropdownHost?.nativeElement||n||this.el}get editable(){return Mt(this.host)}get focused(){return Pt(this.host)||Pt(this.dropdown())}update(e){e&&!this.tuiDropdownEnabled||(this.tuiDropdownOpen=e,this.tuiDropdownOpenChange.emit(e),this.drive())}drive(e=this.tuiDropdownOpen&&this.tuiDropdownEnabled){this.obscured.tuiObscuredEnabled=!!e,this.driver.next(!!e)}focusDropdown(e){let n=this.dropdown();if(!n){this.update(!0);return}let o=this.el.ownerDocument,s=n.appendChild(o.createElement("div")),y=Ft({initial:e?s:n,previous:e,root:n});s.remove(),y?.focus()}};t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=u({type:t,selectors:[["","tuiDropdown","","tuiDropdownOpen",""],["","tuiDropdown","","tuiDropdownOpenChange",""]],contentQueries:function(n,o,s){if(n&1&&se(s,bi,5,Xt),n&2){let c;ct(c=at())&&(o.dropdownHost=c.first)}},hostBindings:function(n,o){n&1&&st("click",function(c){return o.onClick(c.target)})("keydown.arrowDown",function(c){return o.onArrow(c,!1)})("keydown.arrowUp",function(c){return o.onArrow(c,!0)})("keydown.silent.capture",function(c){return o.onEsc(c)},!1,z)("keydown.silent",function(c){return o.onKeydown(c)},!1,z)},inputs:{tuiDropdownEnabled:"tuiDropdownEnabled",tuiDropdownOpen:"tuiDropdownOpen"},outputs:{tuiDropdownOpenChange:"tuiDropdownOpenChange"},standalone:!0,features:[I([Nt,Je(Nt)]),Q([mt,{directive:R,inputs:["tuiActiveZoneParent","tuiActiveZoneParent"],outputs:["tuiActiveZoneChange","tuiActiveZoneChange"]}]),bt]});let i=t;return Zt([ze(Mi)],i.prototype,"onEsc",null),i})();var Ro=(()=>{let t=class t{constructor(){this.tuiDropdownOpenChange=new $t(!1)}set tuiDropdownOpen(e){this.tuiDropdownOpenChange.next(e)}};t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=u({type:t,selectors:[["","tuiDropdownOpen","",3,"tuiDropdown",""],["","tuiDropdownOpenChange","",3,"tuiDropdown",""]],inputs:{tuiDropdownOpen:"tuiDropdownOpen"},outputs:{tuiDropdownOpenChange:"tuiDropdownOpenChange"},standalone:!0});let i=t;return i})();function _o(i){return At(q,"tuiDropdown",i)}function Ho(){let i=At(Bt,"tuiDropdownOpen",!1);return r(Bt).tuiDropdownOpenChange.pipe(w()).subscribe(t=>i.set(t)),i}var jo=(()=>{let t=class t extends $e{};t.\u0275fac=(()=>{let e;return function(o){return(e||(e=h(t)))(o||t)}})(),t.\u0275cmp=G({type:t,selectors:[["tui-dropdowns"]],standalone:!0,features:[I([Ge(ni)]),rt,K],ngContentSelectors:Oi,decls:3,vars:0,consts:[["viewContainer",""]],template:function(n,o){n&1&&(oe(),re(0),ie(1,null,0))},styles:["[_nghost-%COMP%]{display:block;height:100%;isolation:isolate}"],changeDetection:0});let i=t;return i})(),ko=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=u({type:t,standalone:!0,features:[Q([{directive:Bt,inputs:["tuiDropdownOpen","open"],outputs:["tuiDropdownOpenChange","openChange"]}])]});let i=t;return i})();var zo=(()=>{let t=class t{constructor(){this.resolver=Me(),this.icon=r(xe,{self:!0,optional:!0})||r(Ae,{self:!0,optional:!0})||"",this.background=""}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=G({type:t,selectors:[["tui-icon"]],hostVars:4,hostBindings:function(n,o){n&2&&Tt("--t-icon","url("+o.resolver(o.icon)+")")("--t-icon-bg",o.background?"url("+o.resolver(o.background)+")":null)},inputs:{icon:"icon",background:"background"},standalone:!0,features:[K],decls:0,vars:0,template:function(n,o){},styles:[`tui-icon{position:relative;display:inline-block;width:1em;height:1em;font-size:1.5rem;flex-shrink:0;vertical-align:middle;box-sizing:border-box;-webkit-mask:var(--t-icon-bg) no-repeat center / contain;mask:var(--t-icon-bg) no-repeat center / contain}tui-icon:after,tui-icon[tuiIcons]:after{position:absolute;top:0;left:0;width:100%;height:100%;content:"";display:block;-webkit-mask:var(--t-icon) no-repeat center / contain;mask:var(--t-icon) no-repeat center / contain;background:currentColor}
`],encapsulation:2,changeDetection:0});let i=t;return i})();export{_ as a,H as b,jt as c,Ke as d,Ye as e,Xe as f,qe as g,X as h,Je as i,ti as j,Tn as k,kt as l,ei as m,R as n,Zt as o,Rt as p,Ui as q,Qi as r,Ti as s,Fo as t,q as u,xi as v,Bt as w,Ro as x,_o as y,Ho as z,jo as A,ko as B,zo as C};
