import{a as v}from"./chunk-UY2A7J6I.js";import{a as f,c as l}from"./chunk-6KTZOYXJ.js";import{a as d,d as U,e as S}from"./chunk-NRBOFKTV.js";import{m as i}from"./chunk-H4NAPNW2.js";import{E as m,Pc as h,ga as p,ja as a,o as s,oa as g,t as u,ta as c,ua as o}from"./chunk-FW5WJFJQ.js";var n=class r{constructor(t,e){this.http=t;this.store=e}signInUrl="/api/signin";signUpUrl="/api/signup";logoutUrl="/api/logout";signIn(t,e){return this.http.post(this.signInUrl,{email:t,password:e}).pipe(a(A=>{this.setToken(A.token),this.store.dispatch(v.loadUser())}))}signUp(t,e){return this.http.post(this.signUpUrl,{email:t,password:e})}logout(){return this.http.delete(this.logoutUrl).pipe(a(()=>{this.clearToken()}))}setToken(t){localStorage.setItem("token",t)}getToken(){return localStorage.getItem("token")}clearToken(){localStorage.removeItem("token")}isAuthenticated(){return!!this.getToken()}static \u0275fac=function(e){return new(e||r)(c(h),c(i))};static \u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"})};var M=()=>{let r=o(n),t=o(l);return r.isAuthenticated()?t.createUrlTree(["/"]):!0},q=()=>{let r=o(l);return o(i).select(U).pipe(p(e=>e==="manager"?s(!0):s(r.createUrlTree(["not-found"]))))},z=r=>{let t=o(i);return t.select(S).pipe(m(e=>!e),p(()=>t.select(d).pipe(u(e=>!!e||f(r,["/signin"])))))};export{n as a,M as b,q as c,z as d};
